    proxy_cache_path <pwd>/nginx-cache/cache keys_zone=mycache:10m loader_threshold=300
                     loader_files=200 max_size=200m;

    server {
        listen 80;
        server_name <host>;
        client_max_body_size 10M;

        location /update {
            include proxy_params;
            proxy_pass http://unix:<pwd>/update.sock;
        }

        location ~ /read/([0-9]+)/([0-9]+) {
            proxy_cache mycache;
            rewrite ^/read/([0-9]+)$/([0-9]+) /read/$1;
            include proxy_params;
            proxy_pass http://unix:<pwd>/get.sock;
        }

        location ~ /read/([0-9]+) {
            include proxy_params;
            proxy_pass http://unix:<pwd>/get.sock;
        }

    }